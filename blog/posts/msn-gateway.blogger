
este blog esta cada vez mas geek pero como no lo lee nadie posteo lo que se me da la gana<br/><br/>escribi esta clase (no terminada)  para poder conectarse al messenger mediante el puerto<br/>80 mandando request http (como hace el gaim), osea que si tenes un proxy por el puerto 80 estas hecho, probablemente sea la unica implementacion para proxy en el emesene (la parte de proxy no esta implementada todavia :P).<br/><br/><pre><br/>import httplib<br/>import urllib<br/>import urllib2<br/><br/>#terminar<br/>class Proxy:<br/><br/> def __init__( self , host , port , user , password ):<br/><br/>  self.host = str( host )<br/>  self.port = port<br/>  self.user = str( user )<br/>  self.password = str( password )<br/><br/>class HttpMethod:<br/><br/> def __init__( self , host , port , path, proxy = None ):<br/>  self.host = str( host )<br/>  self.path = str( path )<br/>  self.port = port<br/>  self.proxy = proxy<br/><br/>  self.response = ""<br/>  self.data = ""<br/>  self.headers = {}<br/>  self.headers[ "Accept" ] = "*/*"<br/>  self.headers[ "Accept-Language" ] = "en-us"<br/>  self.headers[ "Accept-Encoding" ] = "gzip, deflate"<br/>  self.headers[ "User-Agent" ] = "MSMSGS"<br/>  self.headers[ "Host" ] = "gateway.messenger.hotmail.com"<br/>  self.headers[ "Proxy-Connection" ] = "Keep-Alive"<br/>  self.headers[ "Connection" ] = "Keep-Alive"<br/>  self.headers[ "Pragma" ] = "no-cache"<br/>  self.headers[ "Content-Type" ] = "application/x-msn-messenger"<br/>  self.headers[ "Content-Length" ] = "18"<br/><br/>  self.request = None<br/>  self.connection = httplib.HTTPConnection( self.host + ":" + str( self.port ) )<br/><br/> def send( self , message ):<br/>  self.headers[ "Content-Length" ] = str( len( message ) )<br/>  self.connection.request( "POST" , self.path , message , self.headers )<br/><br/> def recv( self ):<br/>  response = self.connection.getresponse()<br/>  self.response = response.read()<br/><br/>  return self.response<br/><br/>if __name__ == "__main__":<br/> h = HttpMethod( "gateway.messenger.hotmail.com" , 80 , "/gateway/gateway.dll?Action=open&amp;Server=NS&amp;IP=messenger.hotmail.com" )<br/> h.send( "VER 1 MSNP9 CVR0\r\n" )<br/> print h.recv()<br/><br/></pre>
<div style="clear: both;"/>
