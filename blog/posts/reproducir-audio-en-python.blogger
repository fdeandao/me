
una receta de como reproducir un archivo de audio con python en linux, mac y windows.<br/><br/>si encuentran un bug, por favor avisen en los comentarios, solo lo probe en linux :)<br/><br/><br/><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><br/><br/><span class="k">def</span> <span class="nf">is_on_path</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span><br/><span class="sd">"""</span><br/><span class="sd">    returns True if fname is the name of an executable on path (*nix only)</span><br/><span class="sd">    """</span><br/><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'PATH'</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="p">):</span><br/><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">fname</span><span class="p">)):</span><br/><span class="k">return</span> <span class="bp">True</span><br/><br/><span class="k">return</span> <span class="bp">False</span><br/><br/><span class="k">def</span> <span class="nf">dummy_play</span><span class="p">(</span><span class="n">path</span><span class="p">):</span><br/><span class="sd">"""</span><br/><span class="sd">    dummy method used when no method is available</span><br/><span class="sd">    """</span><br/><span class="k">print</span> <span class="s">"can't play"</span><span class="p">,</span> <span class="n">path</span><br/><br/><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">'nt'</span><span class="p">:</span><br/><span class="kn">import</span> <span class="nn">winsound</span><br/><br/><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">path</span><span class="p">):</span><br/><span class="n">winsound</span><span class="o">.</span><span class="n">PlaySound</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">winsound</span><span class="o">.</span><span class="n">SND_FILENAME</span><span class="p">)</span><br/><span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">'posix'</span><span class="p">:</span><br/><span class="k">try</span><span class="p">:</span><br/><span class="kn">import</span> <span class="nn">gst</span><br/><br/><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">path</span><span class="p">):</span><br/><span class="sd">"""</span><br/><span class="sd">            play a sound using gstreamer api</span><br/><span class="sd">            """</span><br/><span class="n">_player</span> <span class="o">=</span> <span class="n">gst</span><span class="o">.</span><span class="n">element_factory_make</span><span class="p">(</span><span class="s">"playbin"</span><span class="p">,</span> <span class="s">"player"</span><span class="p">)</span><br/><span class="n">uri</span> <span class="o">=</span> <span class="s">"file://"</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><br/><span class="n">_player</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s">'uri'</span><span class="p">,</span> <span class="n">uri</span><span class="p">)</span><br/><span class="n">_player</span><span class="o">.</span><span class="n">set_state</span><span class="p">(</span><span class="n">gst</span><span class="o">.</span><span class="n">STATE_PLAYING</span><span class="p">)</span><br/><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span><br/><span class="k">if</span> <span class="n">is_on_path</span><span class="p">(</span><span class="s">'play'</span><span class="p">):</span><br/><span class="n">play</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">popen4</span><span class="p">(</span><span class="s">'play '</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span><br/><span class="k">elif</span> <span class="n">is_on_path</span><span class="p">(</span><span class="s">'aplay'</span><span class="p">):</span><br/><span class="n">play</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">popen4</span><span class="p">(</span><span class="s">'aplay '</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span><br/><span class="k">else</span><span class="p">:</span><br/><span class="n">play</span> <span class="o">=</span> <span class="n">dummy_play</span><br/><span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">'mac'</span><span class="p">:</span><br/><span class="kn">from</span> <span class="nn">AppKit</span> <span class="kn">import</span> <span class="n">NSSound</span><br/><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">path</span><span class="p">):</span><br/><span class="sd">"""</span><br/><span class="sd">        play a sound using mac api</span><br/><span class="sd">        """</span><br/><span class="n">macsound</span> <span class="o">=</span> <span class="n">NSSound</span><span class="o">.</span><span class="n">alloc</span><span class="p">()</span><br/><span class="n">macsound</span><span class="o">.</span><span class="n">initWithContentsOfFile_byReference_</span><span class="p">(</span><span class="n">soundPath</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span><br/><span class="n">macsound</span><span class="o">.</span><span class="n">play</span><span class="p">()</span><br/><span class="k">else</span><span class="p">:</span><br/><span class="n">play</span> <span class="o">=</span> <span class="n">dummy_play</span><br/></pre></div><br/><br/>para usarlo<br/><br/>import play_sound<br/>play_sound.play('path/al/archivo.wav')<br/><br/>para el caso de gstreamer en linux y el de mac, hace falta un mainloop o algo que mantenga la aplicacion abierta para que reproduzca, con popen no hace falta, en windows no se si bloquea o no.
<div style="clear: both;"/>
