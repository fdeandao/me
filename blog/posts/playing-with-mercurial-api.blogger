
to make this code be useful a script like this should be run to test<br/><br/><div class="highlight"><pre><span class="o">[</span> -d fresita <span class="o">]</span> <span class="o">&amp;&amp;</span> rm -rf fresita<br/>mkdir fresita<br/><span class="nb">cd </span>fresita<br/><span class="nb">echo</span> <span class="s2">"test"</span> &gt; README.txt<br/></pre></div><br/><br/>my first test script:<br/><br/><div class="highlight"><pre><span class="k">import</span> <span class="nn">os</span><br/><br/><span class="k">from</span> <span class="nn">mercurial</span> <span class="k">import</span> <span class="n">ui</span><br/><span class="k">from</span> <span class="nn">mercurial</span> <span class="k">import</span> <span class="n">commands</span><br/><span class="k">from</span> <span class="nn">mercurial</span> <span class="k">import</span> <span class="n">localrepo</span><br/><br/><span class="n">ui_</span> <span class="o">=</span> <span class="n">ui</span><span class="o">.</span><span class="n">ui</span><span class="p">()</span><br/><span class="n">create</span> <span class="o">=</span> <span class="mf">1</span><br/><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s">'./fresita'</span><span class="p">)</span><br/><br/><span class="k">def</span> <span class="nf">repo_initialized</span><span class="p">(</span><span class="n">path</span><span class="p">):</span><br/><span class="sd">'''return True if the repo is already initialized'''</span><br/><span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">'.hg'</span><span class="p">))</span><br/><br/><span class="k">if</span> <span class="n">repo_initialized</span><span class="p">(</span><span class="n">path</span><span class="p">):</span><br/><span class="n">create</span> <span class="o">=</span> <span class="mf">0</span><br/><br/><span class="n">repo</span> <span class="o">=</span> <span class="n">localrepo</span><span class="o">.</span><span class="n">localrepository</span><span class="p">(</span><span class="n">ui_</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">create</span><span class="p">)</span><br/><span class="n">repo</span><span class="o">.</span><span class="kp">add</span><span class="p">([</span><span class="s">'README.txt'</span><span class="p">])</span><br/><span class="n">modified</span><span class="p">,</span> <span class="n">added</span><span class="p">,</span> <span class="n">removed</span><span class="p">,</span> <span class="n">deleted</span><span class="p">,</span> <span class="n">unknown</span><span class="p">,</span> <span class="n">ignored</span><span class="p">,</span> <span class="n">clean</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">status</span><span class="p">()</span><br/><br/><span class="k">print</span> <span class="s">'modified'</span><span class="p">,</span> <span class="n">modified</span><br/><span class="k">print</span> <span class="s">'added'</span><span class="p">,</span> <span class="n">added</span><br/><span class="k">print</span> <span class="s">'removed'</span><span class="p">,</span> <span class="n">removed</span><br/><span class="k">print</span> <span class="s">'deleted'</span><span class="p">,</span> <span class="n">deleted</span><br/><span class="k">print</span> <span class="s">'unknown'</span><span class="p">,</span> <span class="n">unknown</span><br/><span class="k">print</span> <span class="s">'ignored'</span><span class="p">,</span> <span class="n">ignored</span><br/><span class="k">print</span> <span class="s">'clean'</span><span class="p">,</span> <span class="n">clean</span><br/><br/><span class="n">repo</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">"my first commit"</span><span class="p">)</span><br/></pre></div><br/><br/>pretty easy :)
<div style="clear: both;"/>
