
aca hay un peque√±o script que hice para migrar de access a postgres, tuve que hacer algunos trucos para que ande bien. si a alguien le sirve...<br/><div class="highlight"><pre><span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">os</span><br/><span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">commands</span><br/><br/>archivo <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(64, 112, 160);">"archivo.mdb"</span><br/><br/>tables <span style="color: rgb(102, 102, 102);">=</span> commands<span style="color: rgb(102, 102, 102);">.</span>getoutput(<span style="color: rgb(64, 112, 160);">"mdb-tables -S </span><span style="color: rgb(112, 160, 208); font-style: italic;">%s</span><span style="color: rgb(64, 112, 160);">"</span> <span style="color: rgb(102, 102, 102);">%</span> (archivo,))<br/>os<span style="color: rgb(102, 102, 102);">.</span>popen(<span style="color: rgb(64, 112, 160);">"rm carga.sql"</span>)<br/>os<span style="color: rgb(102, 102, 102);">.</span>popen(<span style="color: rgb(64, 112, 160);">"rm schema.sql"</span>)<br/><br/>os<span style="color: rgb(102, 102, 102);">.</span>popen(<span style="color: rgb(64, 112, 160);">"mdb-schema -S </span><span style="color: rgb(112, 160, 208); font-style: italic;">%s</span><span style="color: rgb(64, 112, 160);"> postgres| sed 's/Postgres_Unknown 0x0c/Text/' | grep </span><span style="color: rgb(64, 112, 160); font-weight: bold;">\"</span><span style="color: rgb(64, 112, 160);">\-\-</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\"</span><span style="color: rgb(64, 112, 160);"> -v | grep </span><span style="color: rgb(64, 112, 160); font-weight: bold;">\"</span><span style="color: rgb(64, 112, 160);">^DROP TABLE</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\"</span><span style="color: rgb(64, 112, 160);"> -v | sed 's/Bool/Int8/' &gt; schema.sql"</span> \<br/><span style="color: rgb(102, 102, 102);">%</span> (archivo,))<br/><br/><span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> table <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> tables<span style="color: rgb(102, 102, 102);">.</span>split():<br/> cmd <span style="color: rgb(102, 102, 102);">=</span> \<br/><span style="color: rgb(96, 160, 176); font-style: italic;"># si tenes el postgres con locales que te pide insertar la fecha con un</span><br/><span style="color: rgb(96, 160, 176); font-style: italic;"># formato no ISO (MDY) correr la siguiente linea antes de los inserts</span><br/><span style="color: rgb(96, 160, 176); font-style: italic;"># SET DateStyle TO 'MDY';</span><br/><span style="color: rgb(64, 112, 160);">"mdb-export -I -S </span><span style="color: rgb(112, 160, 208); font-style: italic;">%s</span><span style="color: rgb(64, 112, 160);"> </span><span style="color: rgb(112, 160, 208); font-style: italic;">%s</span><span style="color: rgb(64, 112, 160);"> | sed -e 's/)$/)\;/' | sed -e s/</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\\\"</span><span style="color: rgb(64, 112, 160);">/</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\\</span><span style="color: rgb(64, 112, 160);">'/g &gt;&gt; carga.sql"</span><br/><span style="color: rgb(0, 112, 32); font-weight: bold;">if</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">not</span> table<span style="color: rgb(102, 102, 102);">.</span>startswith(<span style="color: rgb(64, 112, 160);">'MSys'</span>):<br/>     os<span style="color: rgb(102, 102, 102);">.</span>popen(cmd <span style="color: rgb(102, 102, 102);">%</span> (archivo, table))<br/></pre></div>
<div style="clear: both;"/>
